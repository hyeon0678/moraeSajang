<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC   "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.morae.mypage.dao.PointDao">
	<select id="checkUser" resultType="int" parameterType="java.lang.String">
		select count(userId) from user where userId =#{param1} and name = #{param2};
	</select>
	
	<insert id="chargeGo" parameterType="Map">
		INSERT INTO chargeHistory (userId,chargePrice,depositor) VALUES (#{param1},#{param3},#{param2});
	</insert>
	
	<select id="myPoint" resultType="int" parameterType="java.lang.String">
		SELECT IFNULL(SUM(value), 0) AS totalSum
			FROM (
			    SELECT chargePrice AS value FROM chargeHistory WHERE userId = #{param1}
			    UNION ALL
			    SELECT pointMonney AS value FROM pointHistory WHERE userId = #{param1}
			) AS totalSum;
	</select>
</mapper>